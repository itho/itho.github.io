<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" rel="stylesheet">
  <link href="https://unpkg.com/vuetify@0.17.2/dist/vuetify.min.css" rel="stylesheet">
  <!-- Title -->
  <title>SecretSanta</title>
  <style>
    .secret {
      background-color: #000;
      color: #000;
    }
    .secret:hover {
      color: #fff;
    }
    .sky-gradient {
      background: linear-gradient(to right, #F48631, #F3452E, #D92146, #AF3379, #0E53A1);
    }
  </style>
</head>
<body>
  <div id="app">
    <v-app>
      <!-- <v-navigation-drawer app></v-navigation-drawer> -->

      <v-toolbar app dark color="red">
        <v-toolbar-title>Secret Santa</v-toolbar-title>
      </v-toolbar>

      <v-content>
        <v-container fluid>
          <v-layout row wrap pt-3>
            <v-flex xs12 sm10 offset-sm1>
              <v-text-field
                autofocus
                name="input-1"
                label="Add New Gifters!"
                id="testing"
                v-model="newGifter"
                @keyup.native.enter="addGifter()"
              ></v-text-field>
              <div class="text-xs-center">
                <v-chip
                  v-for="(gifter, i) in input"
                  color="red"
                  text-color="white"
                  close @input="remove(gifter)"
                >{{ ucfirst(gifter) }}</v-chip>
              </div>
            </v-flex>
          </v-layout>
          <v-layout v-if="input.length" row wrap pt-3>
            <v-flex xs12 sm10 offset-sm1>
              <v-btn @click="randomize()">shuffle</v-btn>
              <table style="width: 100%;">
                <tbody>
                  <tr>
                    <th>Gifter</th>
                    <td v-for="(gifter, i) in input">{{ ucfirst(gifter) }}</td>
                  </tr>
                  <tr>
                    <th>Giftee</th>
                    <td v-for="(gifter, i) in input" class="secret">{{ ucfirst(output[gifter]) }}</td>
                  </tr>
                </tbody>
              </table>
            </v-flex>
          </v-layout>
        </v-container>
      </v-content>

      <v-footer app>
        <v-spacer></v-spacer>
        <div>
          Design<span class="hidden-xs-only">ed with <v-icon class="teal--text">code</v-icon></span> by <a href="http://itho.co" target="_blank">itho</a>
        </div>
      </v-footer>
    </v-app>
  </div>

  <script src="https://unpkg.com/vue@2.5.0/dist/vue.js"></script>
  <script src="https://unpkg.com/vuetify@0.17.2/dist/vuetify.js"></script>
  <!-- <script src="https://unpkg.com/vue-resource@1.3.4/dist/vue-resource.js"></script> -->
  <!-- <script src="https://unpkg.com/vue-router@2.7.0/dist/vue-router.js"></script> -->
  <script>
    let data = {
      output: [],
      select: null,
      newGifter: '',
      input: [
        // "adam",
        // "bernardo",
        // "danny",
        // "ieuan",
        // "jennie",
        // "jess",
        // "kalpesh",
        // "mark",
        // "mous",
        // "neill",
        // "paul b",
        // "paul o",
        // "wale",
        // "zee"
      ]
    }

    new Vue({
      el: '#app',
      data: data,
      mounted: function() {
        this.randomize();
      },
      methods: {
        addGifter() {
          this.input.push(JSON.parse(JSON.stringify(this.newGifter)))
          this.newGifter = ''
          this.randomize()
        },
        randomize () {
          // Take a copy of the input array.
          let arr1 = this.input.slice();
          // Initialise variables.
          let currentIndex = arr1.length, temporaryValue, randomIndex;
          // While there remain elements to shuffle...
          while (0 !== currentIndex) {
            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            // And swap it with the current element.
            temporaryValue = arr1[currentIndex];
            arr1[currentIndex] = arr1[randomIndex];
            arr1[randomIndex] = temporaryValue;
          }
          // Build an array whose key-value pairs are the results of the func.
          let arr2 = [];
          for (let i = 0; i < arr1.length; i++) {
            if ((i + 1) < arr1.length) {
              arr2[arr1[i]] = arr1[i + 1];
            } else {
              arr2[arr1[i]] = arr1[0];
            }
          }
          this.output = arr2;
        },
        remove (name) {
          this.input.splice(this.input.indexOf(name), 1)
          this.randomize()
        },
        ucfirst (string) {
          return string.charAt(0).toUpperCase() + string.slice(1);
        }
      }
    })
  </script>
</body>
</html>
