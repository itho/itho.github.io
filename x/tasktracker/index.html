<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" rel="stylesheet">
  <link href="https://unpkg.com/vuetify@0.15.7/dist/vuetify.min.css" rel="stylesheet">
  <style></style>
  <!-- Title -->
  <title>TicketTracker</title>
</head>
<body>
  <div id="app">
    <v-app>
      <v-toolbar dark class="primary">
        <v-toolbar-side-icon></v-toolbar-side-icon>
        <v-toolbar-title class="white--text">TicketTracker</v-toolbar-title>
        <v-spacer></v-spacer>
        <v-btn icon>
          <v-icon>more_vert</v-icon>
        </v-btn>
      </v-toolbar>
      <main>
        <v-container fluid>
          <!-- <v-btn @click="show = !show">click</v-btn> -->
          <table width="100%">
            <thead>
              <tr>
                <th>ID</th>
                <th>Type</th>
                <th>Reporter</th>
                <th>Created</th>
                <th>Completed</th>
                <th>Quantity</th>
                <th>Comment</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(task, i) in tasks" :key="i">
                <td>{{task.id}}</td>
                <td>{{task.type}}</td>
                <td>{{task.reporter_id}}</td>
                <td>{{task.created_date}}</td>
                <td>{{task.completed_date}}</td>
                <td>{{task.quantity}}</td>
                <td>{{task.comment}}</td>
              </tr>
            </tbody>
          </table>
        </v-container>
      </main>
      <v-footer></v-footer>
    </v-app>
  </div>

  <script src="https://unpkg.com/vue@2.5.3/dist/vue.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>
  <script src="https://unpkg.com/vuefire@1.4.4/dist/vuefire.min.js"></script>
  <!-- <script src="https://unpkg.com/vue-resource@1.3.4/dist/vue-resource.min.js"></script> -->
  <!-- <script src="https://unpkg.com/vue-router@2.7.0/dist/vue-router.min.js"></script> -->
  <script src="https://unpkg.com/vuetify@0.15.7/dist/vuetify.min.js"></script>
  <script>
    Vue.config.devtools = true
    Vue.use(VueFire)

    let data = {
      tasks: [],
      show: false,
      newTask: {
        comment: "",
        type: ""
      }
    }

    let config = {
      apiKey: "AIzaSyB14Gym0u8xrPUVF1CwOrui4WjfNaNPETc",
      authDomain: "tasktracker-c860b.firebaseapp.com",
      databaseURL: "https://tasktracker-c860b.firebaseio.com",
      projectId: "tasktracker-c860b",
      storageBucket: "tasktracker-c860b.appspot.com",
      messagingSenderId: "450430370483"
    }

    const firebaseApp = firebase.initializeApp(config)
    const db = firebaseApp.database()
    // const tasksRef = db.ref().child('/tasks')
    const tasksRef = db.ref('/tasks')

    console.log(db)

    const vm = new Vue({
      el: '#app',
      data: data,
      firebase: {
        tasks: tasksRef
        // tasks: {
        //   source: db.ref('tasks'),
        //   // Optional, allows you to handle any errors.
        //   cancelCallback(err) {
        //     console.error(err);
        //   },
        //   readyCallback: function () {
        //     console.log(tasks);
        //   }
        // }
      },
      methods: {
        addBook: function () {
          tasksRef.push(this.newTask);
          this.newTask.comment = '';
          this.newTask.type = '';
        },
        removeBook: function (book) {
          tasksRef.child(task['.key']).remove()
          // toastr.success('Book removed successfully')
        }
      }
    })
  </script>
</body>
</html>
